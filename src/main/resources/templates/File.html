<!DOCTYPE html>
<html>
<head>
    <title>Login Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="bg-light">
    <div class="container">
        <div id="responseMessage" class="mt-3"></div>
        
        <button class="btn btn-primary mt-3" onclick="submitLogin()">Click here to view message</button>
        <button class="btn btn-success mt-3" onclick="toggleTable()">Click to display courses table</button>
        <div id="courseTable" class="mt-3" style="display: none;"></div>
    </div>
   <div class="container mt-3">
        <h1>Search for a Particular Course</h1>
        <div class="row">
            <div class="col">
                <input class="form-control" type="text" id="courseIdInput" placeholder="Enter Course ID">
            </div>
            <div class="col">
                <button class="btn btn-primary " onclick="searchCourse()">Search</button>
            </div>
        </div>

        <div id="courseDetails" class="mt-3"></div>
    </div>

    <script>
        function searchCourse() {
            var courseId = document.getElementById("courseIdInput").value;
            var url = "http://localhost:8080/courses/" + courseId;

            $.ajax({
                url: url,
                type: "GET",
                dataType: "json",
                success: function(data) {
                    var courseDetails = document.getElementById("courseDetails");
                    var tableHtml = "<table class='table table-bordered'><thead style='background-color: #003060; color: white;'><tr><th>ID</th><th>Title</th><th>Description</th></tr></thead><tbody>";
                    tableHtml += "<tr><td>" + data.id + "</td><td>" + data.title + "</td><td>" + data.description + "</td></tr>";
                    tableHtml += "</tbody></table>";
                    courseDetails.innerHTML = tableHtml;
                },
                error: function(xhr, status, error) {
                    console.error("Error: " + error);
                    var courseDetails = document.getElementById("courseDetails");
                    courseDetails.innerHTML = "<p>Error: Course not found</p>";
                }
            });
        }

        var tableVisible = false;

        function submitLogin() {
            $.ajax({
                url: "http://localhost:8080/home",
                type: "GET",
                dataType: "json",
                success: function(data) {
                    var responseMessage = document.getElementById("responseMessage");
                    responseMessage.innerHTML = "<div class='bg-dark p-3 text-white'> Response Message: " + data.message + " </div>";
                },
                error: function(xhr, status, error) {
                    console.error("Error: " + error);
                }
            });
        }

        function viewCourses() {
            $.ajax({
                url: "http://localhost:8080/courses",
                type: "GET",
                dataType: "json",
                success: function(data) {
                    var courseTable = document.getElementById("courseTable");
                    var tableHtml = "<table class='table table-bordered'><thead style='background-color: #003060; color: white;'><tr><th>ID</th><th>Name</th><th>Description</th></tr></thead><tbody>";

                    data.forEach(course => {
                        tableHtml += "<tr><td>" + course.id + "</td><td>" + course.title + "</td><td>" + course.description + "</td></tr>";
                    });

                    tableHtml += "</tbody></table>";
                    courseTable.innerHTML = tableHtml;
                },
                error: function(xhr, status, error) {
                    console.error("Error: " + error);
                }
            });
        }

        function toggleTable() {
            var courseTable = document.getElementById("courseTable");
            if (tableVisible) {
                courseTable.style.display = "none";
                tableVisible = false;
            } else {
                courseTable.style.display = "block";
                tableVisible = true;
                viewCourses();
            }
        }
    </script>
</body>
</html>
